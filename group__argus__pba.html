<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AFBR-S50 API Reference Manual: Pixel Binning Algorithm</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="AFBR-S50.ico"/></td>
  <td id="projectalign">
   <div id="projectname">AFBR-S50 API Reference Manual<span id="projectnumber">&#160;v1.6.5</span>
   </div>
   <div id="projectbrief">AFBR-S50 Time-of-Flight Sensor SDK for Embedded Software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__argus__pba.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle"><div class="title">Pixel Binning Algorithm<div class="ingroups"><a class="el" href="group__argus.html">AFBR-S50 SDK</a> &raquo; <a class="el" href="group__argus__api.html">AFBR-S50 API</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Pixel Binning Algorithm (PBA) parameter definitions and API functions.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Pixel Binning Algorithm:</div>
<div class="dyncontent">
<div class="center"><img src="group__argus__pba.png" border="0" usemap="#agroup____argus____pba" alt=""/></div>
<map name="agroup____argus____pba" id="agroup____argus____pba">
<area shape="rect" href="group__argus__api.html" title="The main module of the API from the AFBR&#45;S50 SDK." alt="" coords="5,5,114,31"/>
<area shape="rect" title="Pixel Binning Algorithm (PBA) parameter definitions and API functions." alt="" coords="162,5,315,31"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structargus__cfg__pba__t.html">argus_cfg_pba_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The pixel binning algorithm settings data structure.  <a href="structargus__cfg__pba__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaf88e08ab98d98662ae52e5b997a012e3" id="r_gaf88e08ab98d98662ae52e5b997a012e3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf88e08ab98d98662ae52e5b997a012e3">argus_pba_flags_t</a> { <br />
&#160;&#160;<a class="el" href="#ggaf88e08ab98d98662ae52e5b997a012e3a9040d10a7ff9f189290aeedf37bd7fbf">PBA_ENABLE</a> = 1U &lt;&lt; 0U
, <br />
&#160;&#160;<a class="el" href="#ggaf88e08ab98d98662ae52e5b997a012e3a26c1d15e32587049003d2bb7d6381589">PBA_ENABLE_GOLDPX_PRIORITY_MODE</a> = 1U &lt;&lt; 4U
, <br />
&#160;&#160;<a class="el" href="#ggaf88e08ab98d98662ae52e5b997a012e3aa99d9fbb517a096e227071236bb6363f">PBA_ENABLE_GOLDPX_FALLBACK_MODE</a> = 1U &lt;&lt; 5U
, <br />
&#160;&#160;<a class="el" href="#ggaf88e08ab98d98662ae52e5b997a012e3ac8a31ccca12e77c30e94f4f1e4cd6a71">PBA_ENABLE_MIN_DIST_SCOPE</a> = 1U &lt;&lt; 6U
<br />
 }</td></tr>
<tr class="memdesc:gaf88e08ab98d98662ae52e5b997a012e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable flags for the pixel binning algorithm.  <a href="#gaf88e08ab98d98662ae52e5b997a012e3">More...</a><br /></td></tr>
<tr class="separator:gaf88e08ab98d98662ae52e5b997a012e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9850b698d5327e8bca0c99c1626362f" id="r_gab9850b698d5327e8bca0c99c1626362f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab9850b698d5327e8bca0c99c1626362f">argus_pba_averaging_mode_t</a> { <br />
&#160;&#160;<a class="el" href="#ggab9850b698d5327e8bca0c99c1626362fa0c046d377a7a4a72caebab5e78909256">PBA_SIMPLE_AVG</a> = 1U
, <br />
&#160;&#160;<a class="el" href="#ggab9850b698d5327e8bca0c99c1626362fa918715db182c050112f91537fb798f33">PBA_LINEAR_AMPLITUDE_WEIGHTED_AVG</a> = 2U
<br />
 }</td></tr>
<tr class="memdesc:gab9850b698d5327e8bca0c99c1626362f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The averaging modes for the pixel binning algorithm.  <a href="#gab9850b698d5327e8bca0c99c1626362f">More...</a><br /></td></tr>
<tr class="separator:gab9850b698d5327e8bca0c99c1626362f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Pixel Binning Algorithm (PBA) parameter definitions and API functions. </p>
<hr  />
  <p>Defines the generic Pixel Binning Algorithm (PBA) setup parameters and data structure.</p>
<p>The PBA module contains filter algorithms that determine the pixels with the best signal quality and extract an 1D distance information from the filtered pixels by averaging them in a specified way.</p>
<p>Basically, the Pixel Binning Algorithm is a multi-stage filter:</p>
<ol type="1">
<li>A fixed pre-filter mask is applied to statically disable specified pixels.</li>
<li>A relative and absolute amplitude filter is applied in the second stage. The relative filter is determined by a ratio of the maximum amplitude off all available (i.e. not filtered in stage 1) pixels. Pixels that have an amplitude below the relative threshold are dismissed. The same holds true for the absolute amplitude threshold. All pixel with smaller amplitude are dismissed.<br  />
 Note that the absolute amplitude threshold is disabled if the Golden Pixel (see below) is also disabled in order to prevent invalid filtering for multi-pixel devices.<br  />
 The relative threshold is useful to setup a distance measurement scenario. All well illuminated pixels are selected and considered for the final 1D distance. The absolute threshold is used to dismiss pixels that are below the noise level. The latter would be considered for the 1D result if the maximum amplitude is already very low.<br  />
 Those threshold are implemented using a hysteresis behavior. For its configuration, see the following parameters:<ul>
<li><a class="el" href="structargus__cfg__pba__t.html#a6b038cd6070caec679adf0f42c266f9c">argus_cfg_pba_t::RelativeAmplitudeInclusion</a></li>
<li><a class="el" href="structargus__cfg__pba__t.html#ab488f6c4785d7647e8746e6cae25d6a9">argus_cfg_pba_t::RelativeAmplitudeExclusion</a></li>
<li><a class="el" href="structargus__cfg__pba__t.html#acb27de474ecec4e5a17f978e3ab810d9">argus_cfg_pba_t::AbsoluteAmplitudeInclusion</a></li>
<li><a class="el" href="structargus__cfg__pba__t.html#aa26e1504abe08d1a04695d10c3e88e40">argus_cfg_pba_t::AbsoluteAmplitudeExclusion</a></li>
</ul>
</li>
<li>An absolute minimum distance filter is applied in addition to the amplitude filter. This removes all pixel that have a lower distance than the specified threshold. This is used to remove invalid pixels that can be detected by a physically not correct negative distance.<br  />
 For its configuration, see the following parameters:<ul>
<li><a class="el" href="#ggaf88e08ab98d98662ae52e5b997a012e3ac8a31ccca12e77c30e94f4f1e4cd6a71">PBA_ENABLE_MIN_DIST_SCOPE</a></li>
<li><a class="el" href="structargus__cfg__pba__t.html#ad30dbaa88237505f52a52d309e0d61e5">argus_cfg_pba_t::AbsoluteDistanceScopeInclusion</a></li>
<li><a class="el" href="structargus__cfg__pba__t.html#a302d7538c0d26e832537375acf5ad73e">argus_cfg_pba_t::AbsoluteDistanceScopeExclusion</a></li>
<li><a class="el" href="structargus__cfg__pba__t.html#a3464bccaa6d4a20016b0a19b922bc40d">argus_cfg_pba_t::RelativeDistanceScopeInclusion</a></li>
<li><a class="el" href="structargus__cfg__pba__t.html#acfe797583a4ae005eff571e9867358d0">argus_cfg_pba_t::RelativeDistanceScopeExclusion</a></li>
</ul>
</li>
<li>A distance filter is used to distinguish pixels that target the actual object from pixels that see the brighter background, e.g. white walls. Thus, the pixel with the minimum distance is referenced and all pixel that have a distance between the minimum and the given minimum distance scope are selected for the 1D distance result. The minimum distance scope is determined by an relative (to the current minimum distance) and an absolute value. The larger scope value is the relevant one, i.e. the relative distance scope can be used to heed the increasing noise at larger distances.<br  />
 For its configuration, see the following parameters:<ul>
<li><a class="el" href="structargus__cfg__pba__t.html#a28dc44b110d452983cfd6cc9e7fac60b">argus_cfg_pba_t::AbsoluteMinimumDistanceThreshold</a></li>
</ul>
</li>
<li>If all of the above filters fail to determine a single valid pixel, the Golden Pixel is used as a fallback value. The Golden Pixel is the pixel that sits right at the focus point of the optics at large distances. Thus, it is expected to have the best signal at large distances.<br  />
 For its configuration, see the following parameters:<ul>
<li><a class="el" href="#ggaf88e08ab98d98662ae52e5b997a012e3aa99d9fbb517a096e227071236bb6363f">PBA_ENABLE_GOLDPX_FALLBACK_MODE</a></li>
</ul>
</li>
<li>In order to avoid unwanted effects from "out-of-focus" pixels in application that require a smaller focus, the Golden Pixel Priority Mode prioritizes a valid signal on the central Golden Pixel over other pixels. That is, while the Golden Pixel has a reasonable signal strength, it is the only pixel considered for the 1D result.<br  />
 For its configuration, see the following parameters:<ul>
<li><a class="el" href="#ggaf88e08ab98d98662ae52e5b997a012e3aa99d9fbb517a096e227071236bb6363f">PBA_ENABLE_GOLDPX_FALLBACK_MODE</a></li>
<li><a class="el" href="structargus__cfg__pba__t.html#ac22b03530ed2079aab624a9ef351e304">argus_cfg_pba_t::GoldenPixelPriorityAmplitudeInclusion</a></li>
<li><a class="el" href="structargus__cfg__pba__t.html#ad8a10050a15ad53f4de6e3d88e917288">argus_cfg_pba_t::GoldenPixelPriorityAmplitudeExclusion</a></li>
</ul>
After filtering is done, there may be more than a single pixel left to determine the 1D signal. Therefore several averaging methods are implemented to obtain the best 1D result from many pixels. See <a class="el" href="#gab9850b698d5327e8bca0c99c1626362f" title="The averaging modes for the pixel binning algorithm.">argus_pba_averaging_mode_t</a> for details.</li>
</ol>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gab9850b698d5327e8bca0c99c1626362f" name="gab9850b698d5327e8bca0c99c1626362f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab9850b698d5327e8bca0c99c1626362f">&#9670;&#160;</a></span>argus_pba_averaging_mode_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gab9850b698d5327e8bca0c99c1626362f">argus_pba_averaging_mode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The averaging modes for the pixel binning algorithm. </p>
<hr  />
  <table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggab9850b698d5327e8bca0c99c1626362fa0c046d377a7a4a72caebab5e78909256" name="ggab9850b698d5327e8bca0c99c1626362fa0c046d377a7a4a72caebab5e78909256"></a>PBA_SIMPLE_AVG&#160;</td><td class="fielddoc"><p>Evaluate the 1D range from all available pixels using a simple average. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggab9850b698d5327e8bca0c99c1626362fa918715db182c050112f91537fb798f33" name="ggab9850b698d5327e8bca0c99c1626362fa918715db182c050112f91537fb798f33"></a>PBA_LINEAR_AMPLITUDE_WEIGHTED_AVG&#160;</td><td class="fielddoc"><p>Evaluate the 1D range from all available pixels using a linear amplitude weighted averaging method. Formula: x_mean = sum(x_i * A_i) / sum(A_i) </p>
</td></tr>
</table>

</div>
</div>
<a id="gaf88e08ab98d98662ae52e5b997a012e3" name="gaf88e08ab98d98662ae52e5b997a012e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf88e08ab98d98662ae52e5b997a012e3">&#9670;&#160;</a></span>argus_pba_flags_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gaf88e08ab98d98662ae52e5b997a012e3">argus_pba_flags_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable flags for the pixel binning algorithm. </p>
<hr  />
 <p>Determines the pixel binning algorithm feature enable status. </p><pre class="fragment">     - [0]: #PBA_ENABLE: Enables the pixel binning feature.
     - [1]: reserved
     - [2]: reserved
     - [3]: reserved
     - [4]: #PBA_ENABLE_GOLDPX_PRIORITY_MODE: Enables the Golden Pixel
                                              priority mode feature.
     - [5]: #PBA_ENABLE_GOLDPX_FALLBACK_MODE: Enables the Golden Pixel
                                              fallback mode feature.
     - [6]: #PBA_ENABLE_MIN_DIST_SCOPE: Enables the minimum distance
                                        scope feature.
     - [7]: reserved
     .
</pre> <table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaf88e08ab98d98662ae52e5b997a012e3a9040d10a7ff9f189290aeedf37bd7fbf" name="ggaf88e08ab98d98662ae52e5b997a012e3a9040d10a7ff9f189290aeedf37bd7fbf"></a>PBA_ENABLE&#160;</td><td class="fielddoc"><p>Enables the pixel binning feature. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf88e08ab98d98662ae52e5b997a012e3a26c1d15e32587049003d2bb7d6381589" name="ggaf88e08ab98d98662ae52e5b997a012e3a26c1d15e32587049003d2bb7d6381589"></a>PBA_ENABLE_GOLDPX_PRIORITY_MODE&#160;</td><td class="fielddoc"><p>Enables the Golden Pixel Priority Mode. If enabled, the Golden Pixel is prioritized over other Pixels as long as it has a good signal (determined by # </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf88e08ab98d98662ae52e5b997a012e3aa99d9fbb517a096e227071236bb6363f" name="ggaf88e08ab98d98662ae52e5b997a012e3aa99d9fbb517a096e227071236bb6363f"></a>PBA_ENABLE_GOLDPX_FALLBACK_MODE&#160;</td><td class="fielddoc"><p>Enables the Golden Pixel Fallback Mode. If enabled, the Golden Pixel is used as a last fallback pixel to obtain a valid signal from. This is recommended for all non-multi pixel devices whose TX field-of-view is aligned to target the Golden Pixel in factory calibration. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaf88e08ab98d98662ae52e5b997a012e3ac8a31ccca12e77c30e94f4f1e4cd6a71" name="ggaf88e08ab98d98662ae52e5b997a012e3ac8a31ccca12e77c30e94f4f1e4cd6a71"></a>PBA_ENABLE_MIN_DIST_SCOPE&#160;</td><td class="fielddoc"><p>Enables the minimum distance scope filter. </p>
</td></tr>
</table>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
	<!-- id is needed for treeview function! -->
	<ul>
		<li class="footer"> 
			<a href="https://www.broadcom.com/">Broadcom Inc.</a>
		</li>
	</ul>
</div>
</body>
</html>
